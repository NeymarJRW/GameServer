{"remainingRequest":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaga/Desktop/GameServer/src/views/Manage/Recom_game.vue?vue&type=style&index=0&id=0f8990aa&scoped=true&lang=css&","dependencies":[{"path":"/Users/gaga/Desktop/GameServer/src/views/Manage/Recom_game.vue","mtime":1573452422335},{"path":"/Users/gaga/Desktop/GameServer/node_modules/css-loader/index.js","mtime":1557114191000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1557114192000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/postcss-loader/src/index.js","mtime":1557114192000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/cache-loader/dist/cjs.js","mtime":1558076220000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/index.js","mtime":1557114192000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.recommend {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n}\n\n.addgame {\n  text-align: center;\n  margin-top: 10px;\n}\n.upload_image {\n  position: absolute;\n  top: 0;\n  transform: translate(-50%, 0);\n  height: 100%;\n}\n.addbtn{\n  margin-bottom: 10px;\n}\n",{"version":3,"sources":["Recom_game.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Recom_game.vue","sourceRoot":"src/views/Manage","sourcesContent":["<template>\n  <div class=\"recommend\">\n    <Button class=\"addbtn\" type=\"primary\" @click=\"addflag = true\">添加游戏</Button>\n\n    <Table class=\"table\" :loading=\"tableloading\" stripe border :columns=\"columns\" :data=\"pagedata\"></Table>\n    <Page\n      style=\"text-align:center;margin-top:10px\"\n      :total=\"total\"\n      :page-size=\"pagesize\"\n      @on-change=\"pagechange\"\n    />\n<!-- <Poptip trigger=\"hover\" placement=\"right\" >\n        <img style=\"width:50px\" src=\"http://img4.imgtn.bdimg.com/it/u=1485081754,2164381578&fm=26&gp=0.jpg\" alt=\"\">\n        <div class=\"api\" slot=\"content\">\n          <img style=\"width:200px\" src=\"http://img4.imgtn.bdimg.com/it/u=1485081754,2164381578&fm=26&gp=0.jpg\" alt=\"\">\n\n        </div>\n    </Poptip> -->\n    <Modal v-model=\"addflag\" width=\"600\">\n      <p slot=\"header\" style=\"text-align:center\">\n        <span>添加游戏</span>\n      </p>\n      <div class=\"addgame\">\n        名字:\n        <Input v-model=\"name\" placeholder=\"请输入游戏名称...\" style=\"width: 400px\" />\n      </div>\n      <div class=\"addgame\">\n        bundle:\n        <Input  v-model=\"bundle\" placeholder=\"请输入游戏标识...\" style=\"width: 400px\" />\n      </div>\n      <div class=\"addgame\">\n        版本:\n        <Input v-model=\"version\" placeholder=\"请输入游戏版本...\" style=\"width: 400px\" />\n      </div>\n            <div class=\"addgame\">\n        平台:\n       <Select v-model=\"platform\" style=\"width:400px\" >\n          <Option v-for=\"item in platformarr\" :value=\"item.platform\" :key=\"item.id\">{{ item.name }}</Option>\n        </Select>\n      </div>\n      <div class=\"addgame\">\n        <Upload\n          style=\"margin:0 40px\"\n          :before-upload=\"handleUpload\"\n          type=\"drag\"\n          action=\"//jsonplaceholder.typicode.com/posts/\"\n        >\n          <div style=\"padding: 20px 0\">\n            <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n            <p>点击此处上传你的头像</p>\n          </div>\n          <img :src=\"uploadsrc\" class=\"upload_image\" alt />\n        </Upload>\n      </div>\n      <div slot=\"footer\">\n        <Button type=\"primary\" size=\"large\" long @click=\"addGame\">添加</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { gameRecommend, platformRecommend,recomGameadd ,pinjieUrl} from \"@/api/index.js\";\nimport { Msg } from \"@/api/data.js\";\nimport { log } from 'util';\nexport default {\n  data() {\n    return {\n      addflag: false,\n      uploadsrc: \"\",\n      name: \"\",\n      bundle: \"\",\n      version: \"\",\n      icon: null,\n      platform:\"\",\n      platformarr:[],\n      columns: [\n        {\n          title: \"ID\",\n          key: \"id\",\n          width: 80\n        },\n        {\n          title: \"图像\",\n          key: \"icon\",\n          width: 80,\n          render: (h, params) => {\n            return h(\"div\", [\n              h(\"Avatar\", {\n                props: {\n                  shape: \"square\",\n                  // src: params.row.icon\n                  src: pinjieUrl+params.row.icon\n                }\n              })\n            ]);\n          }\n        },\n        {\n          title: \"名字\",\n          key: \"name\",\n          width: 150\n        },\n        {\n          title: \"版本\",\n          key: \"version\",\n          width: 150\n        },\n        {\n          title: \"标识\",\n          key: \"bundle\"\n        },\n                {\n          title: \"平台\",\n          key: \"platform\"\n        },\n      ],\n      gamedata: [], //所有游戏\n      total: 0, //一共几条数据\n      pagesize: 5, //一页几条数据\n      tableloading: false,\n      pagedata: []\n    };\n  },\n  mounted() {\n\n    this.getdata();\n  },\n  methods: {\n    getdata(){\n      this.tableloading=true;\n      gameRecommend().then(res => {\n        this.tableloading=false;\n        this.total=res.msg.length;\n         this.gamedata = res.msg;\n         this.pagedata = this.gamedata.slice(0, this.pagesize);\n      });\n      platformRecommend().then(res=>{\n        console.log(res)\n          this.platformarr=res.msg;\n      })\n    },\n    pagechange(index) {\n      var _start = (index - 1) * this.pagesize;\n      var _end = index * this.pagesize;\n      this.pagedata = this.gamedata.slice(_start, _end);\n    },\n    handleUpload(file) {\n      var self = this;\n      // console.log(file);\n      var reader = new FileReader(),\n        img = new Image();\n      reader.readAsDataURL(file);\n      reader.onload = function() {\n        // console.log(this.result);\n        self.uploadsrc = this.result;\n      };\n      this.icon = file;\n\n    },\n    addGame() {\n      if (\n        this.bundle.length > 0 &&\n        this.name.length > 0 &&\n        this.version.length > 0 &&\n        this.platform.length>0 &&\n        this.icon\n      ) {\n        let data = new FormData();\n        data.append(\"bundle\", this.bundle);\n        data.append(\"name\", this.name);\n        data.append(\"version\", this.version);\n        data.append(\"platform\", this.platform);\n        data.append(\"icon\", this.icon);\n        const option = {\n        method: \"post\",\n        body: data\n      };\n        fetch(recomGameadd, option)\n          .then(res => res.json())\n          .then(resJson => {\n            if (resJson.state === \"1\") {\n              this.addflag  = false;\n              this.$Message.success(resJson.msg);\n              this.getdata();\n            } else {\n              this.$Message.error(resJson.msg);\n            }\n          });\n      }else{\n              this.$Message.error(\"添加失败\");\n\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.recommend {\n  width: 100%;\n  height: 100%;\n  padding: 20px;\n}\n\n.addgame {\n  text-align: center;\n  margin-top: 10px;\n}\n.upload_image {\n  position: absolute;\n  top: 0;\n  transform: translate(-50%, 0);\n  height: 100%;\n}\n.addbtn{\n  margin-bottom: 10px;\n}\n</style>\n"]}]}