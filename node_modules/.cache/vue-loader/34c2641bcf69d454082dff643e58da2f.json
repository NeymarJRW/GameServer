{"remainingRequest":"/Users/mac/Desktop/茜茜公主/GameServer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/茜茜公主/GameServer/src/views/Manage/Marilyn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/茜茜公主/GameServer/src/views/Manage/Marilyn.vue","mtime":1555737285000},{"path":"/Users/mac/Desktop/茜茜公主/GameServer/node_modules/cache-loader/dist/cjs.js","mtime":1558076220204},{"path":"/Users/mac/Desktop/茜茜公主/GameServer/node_modules/babel-loader/lib/index.js","mtime":1557114185618},{"path":"/Users/mac/Desktop/茜茜公主/GameServer/node_modules/cache-loader/dist/cjs.js","mtime":1558076220204},{"path":"/Users/mac/Desktop/茜茜公主/GameServer/node_modules/vue-loader/lib/index.js","mtime":1557114192616}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n  classIndex,\r\n  classAdd,\r\n  classDelete,\r\n  classUpdate,\r\n  gameImgurl,\r\n  judgeName,\r\n  onfocus,\r\n  onblur\r\n} from \"@/api/index\";\r\nimport { setTimeout } from \"timers\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      btnAdd: true,\r\n      btnEdit: true,\r\n      datalist: [],\r\n      marilynName: \"\",\r\n      marilynEnName: \"\",\r\n      marilynOrder: \"\",\r\n      addCard: false,\r\n      deleteModel: false,\r\n      modal_loading: false,\r\n      currentDelete: \"\",\r\n      editState: false, // 关闭状态\r\n      editModel: false,\r\n      updateName: \"\",\r\n      updateEnName: \"\",\r\n      updateOrder: \"\",\r\n      updateId: \"\",\r\n      spinShow: true,\r\n      gameUpload: \"\",\r\n      marilynimg: \"\",\r\n      updateImage: \"\",\r\n      gameImgurl: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    var judgename_add = document\r\n      .querySelector(\".judgename_add\")\r\n      .querySelector(\"input\");\r\n    var judgename_edit = document\r\n      .querySelector(\".judgename_edit\")\r\n      .querySelector(\"input\");\r\n\r\n    onfocus(judgename_add, () => {\r\n      judgename_add.style.border = \"1px solid #2d8cf0\";\r\n      this.btnAdd = true;\r\n    });\r\n    onblur(judgename_add, () => {\r\n      judgeName({ name: this.marilynName, type: \"class\" }).then(res => {\r\n        if (res.state == 0) {\r\n          if (this.addCard) {\r\n            this.btnAdd = false;\r\n            this.$Message.error(\"名字为空或该名字已存在\");\r\n            judgename_add.style.border = \"1px solid red\";\r\n            setTimeout(() => {\r\n              judgename_add.style.border = \"1px solid #dcdee2\";\r\n            }, 2000);\r\n          }\r\n        }\r\n      });\r\n    });\r\n    onfocus(judgename_edit, () => {\r\n      judgename_edit.style.border = \"1px solid #2d8cf0\";\r\n      this.btnEdit = true;\r\n    });\r\n    onblur(judgename_edit, () => {\r\n      judgeName({\r\n        name: this.updateName,\r\n        type: \"class\",\r\n        id: this.updateId\r\n      }).then(res => {\r\n        if (res.state == 0) {\r\n          if (this.editModel) {\r\n\r\n            this.btnEdit = false;\r\n            this.$Message.error(\"名字为空或该名字已存在\");\r\n            judgename_edit.style.border = \"1px solid red\";\r\n            setTimeout(() => {\r\n              judgename_edit.style.border = \"1px solid #dcdee2\";\r\n            }, 2000);\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    this.gameImgurl = gameImgurl;\r\n    this.getData();\r\n  },\r\n  watch: {\r\n    $route(to, from) {},\r\n    addCard(value) {\r\n      this.btnAdd = true;\r\n    },\r\n    editModel(value){\r\n      this.btnEdit = true;\r\n    }\r\n  },\r\n  methods: {\r\n    getData() {\r\n      this.spinShow = true;\r\n      classIndex().then(res => {\r\n        if (res.state === \"1\") {\r\n          this.datalist = res.msg;\r\n          this.spinShow = false;\r\n        }\r\n      });\r\n    },\r\n    uploadSuccess(res, file) {},\r\n    addClass() {\r\n      if (this.marilynName.trim().length !== 0) {\r\n        let data = new FormData();\r\n        data.append(\"file\", this.file);\r\n        data.append(\"name\", this.marilynName);\r\n        data.append(\"alias\", this.marilynEnName);\r\n        data.append(\"order\", this.marilynOrder || this.datalist.length + 1);\r\n        const option = {\r\n          method: \"post\",\r\n          body: data\r\n        };\r\n        fetch(classAdd, option)\r\n          .then(res => res.json())\r\n          .then(resJson => {\r\n            if (resJson.state === \"1\") {\r\n              this.$Message.success(resJson.msg);\r\n              this.getData();\r\n              this.marilynName = \"\";\r\n              this.marilynEnName = \"\";\r\n              this.marilynOrder = \"\";\r\n              this.addCard = false;\r\n            } else {\r\n              this.$Message.error(resJson.msg);\r\n            }\r\n          });\r\n      } else {\r\n        this.$Message.error(\"分类名称不要为空噢\");\r\n      }\r\n    },\r\n    toolDelete() {\r\n      this.modal_loading = true;\r\n      classDelete({\r\n        id: this.currentDelete\r\n      }).then(res => {\r\n        this.modal_loading = false;\r\n        if (res.state === \"1\") {\r\n          this.deleteModel = false;\r\n          this.$Message.success(res.msg);\r\n          this.getData();\r\n        } else {\r\n          this.$Message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n    toolEdit() {\r\n      this.modal_loading = true;\r\n      let data = new FormData();\r\n      if (this.currentImg) {\r\n        data.append(\"file\", this.currentImg);\r\n      }\r\n      data.append(\"id\", this.updateId);\r\n      data.append(\"name\", this.updateName);\r\n      data.append(\"alias\", this.updateEnName);\r\n      data.append(\"order\", this.updateOrder);\r\n      const option = {\r\n        method: \"post\",\r\n        body: data\r\n      };\r\n      fetch(classUpdate, option)\r\n        .then(res => res.json())\r\n        .then(resJson => {\r\n          this.modal_loading = false;\r\n          if (resJson.state === \"1\") {\r\n            this.$Message.success(resJson.msg);\r\n            this.updateId = \"\";\r\n            this.updateName = \"\";\r\n            this.updateEnName = \"\";\r\n            this.updateOrder = \"\";\r\n            this.getData();\r\n            this.editModel = false;\r\n          } else {\r\n            this.$Message.error(resJson.msg);\r\n          }\r\n        });\r\n      // classUpdate({\r\n      //   id: this.updateId,\r\n      //   name: this.updateName,\r\n      //   order: this.updateOrder\r\n      // }).then(res => {\r\n      //   this.modal_loading = false\r\n      //   if(res.state === \"1\") {\r\n      //     this.$Message.success(res.msg)\r\n      //     this.updateId = \"\"\r\n      //     this.updateName = \"\"\r\n      //     this.updateOrder = \"\"\r\n      //     this.getData()\r\n      //     this.editModel = false\r\n      //   } else {\r\n      //     this.$Message.error(res.msg)\r\n      //   }\r\n      // })\r\n    },\r\n    handleUpload(file) {\r\n      var self = this;\r\n      var reader = new FileReader(),\r\n        img = new Image();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = function(e) {\r\n        self.marilynimg = e.target.result;\r\n      };\r\n      this.file = file;\r\n    },\r\n    modifyUpload(e) {\r\n      var self = this;\r\n      this.currentImg = e.currentTarget.files[0];\r\n      var reader = new FileReader(),\r\n        img = new Image();\r\n      reader.readAsDataURL(this.currentImg);\r\n      reader.onload = function(e) {\r\n        document.querySelector(\".curtimg\").src = e.target.result;\r\n      };\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["Marilyn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Marilyn.vue","sourceRoot":"src/views/Manage","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\r\n    <div class=\"marilyn_tab\">\r\n      <Card class=\"marilyn_card marilyn_upload\">\r\n        <div class=\"add_game_view\" @click=\"addCard = true\">\r\n          <img src=\"../../images/add.png\" style=\"height:150px;width:150px\">\r\n          <span style=\"display:block;text-align:center\">添加分类</span>\r\n        </div>\r\n      </Card>\r\n\r\n      <Card class=\"marilyn_card\" v-for=\"i in datalist\">\r\n        <div style=\"text-align:center\">\r\n          <img :src=\"gameImgurl + i.image\" class=\"marilyn_img\">\r\n          <h3 class=\"marilyn_name\">{{i.name}}</h3>\r\n          <p class=\"marilyn_num\">英文名: {{i.alias }}</p>\r\n          <p class=\"marilyn_num\">游戏数量: {{i.num}}</p>\r\n          <p class=\"marilyn_num\">排序: {{i.order}}</p>\r\n        </div>\r\n        <div class=\"marilyn_tools\">\r\n          <i\r\n            class=\"fas fa-trash-alt\"\r\n            style=\"cursor:pointer;color:#ed4014\"\r\n            @click=\"currentDelete = i.id; deleteModel = !deleteModel\"\r\n          ></i>\r\n          <i\r\n            class=\"far fa-edit\"\r\n            style=\"cursor:pointer\"\r\n            @click=\"updateImage = i.image;updateId = i.id; updateName = i.name;updateEnName =i.alias, updateOrder = i.order; editModel = !editModel\"\r\n          ></i>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n\r\n    <Modal v-model=\"addCard\" width=\"360\" footer-hide>\r\n      <div style=\"text-align:center\" class=\"marilyn_up_card\">\r\n        <Upload\r\n          multiple\r\n          type=\"drag\"\r\n          :action=\"gameUpload\"\r\n          name=\"file\"\r\n          :on-success=\"uploadSuccess\"\r\n          :show-upload-list=\"false\"\r\n          :format=\"['jpg','jpeg','png','gif']\"\r\n          :before-upload=\"handleUpload\"\r\n        >\r\n          <div style=\"padding: 20px 0\">\r\n            <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n            <p>单击或拖动图片到此处上传</p>\r\n          </div>\r\n          <img :src=\"marilynimg\" class=\"upload_image\" alt>\r\n        </Upload>\r\n      </div>\r\n\r\n      <div class=\"marilyn_margin\" style=\"text-align:center\">\r\n        <Input\r\n          class=\"judgename_add\"\r\n          prefix=\"ios-game-controller-b\"\r\n          placeholder=\"中文分类名字 ...\"\r\n          style=\"width: auto\"\r\n          v-model=\"marilynName\"\r\n        />\r\n      </div>\r\n      <div class=\"marilyn_margin\" style=\"text-align:center\">\r\n        <Input\r\n          prefix=\"ios-game-controller-b-outline\"\r\n          placeholder=\"英文分类名字 ...\"\r\n          style=\"width: auto\"\r\n          v-model=\"marilynEnName\"\r\n        />\r\n      </div>\r\n      <div class=\"marilyn_margin\" style=\"text-align:center\">\r\n        <Input placeholder=\"排序序号 ...\" style=\"width: auto\" v-model=\"marilynOrder\">\r\n          <Icon type=\"logo-buffer\" slot=\"prefix\"/>\r\n        </Input>\r\n        <p style=\"font-size:12px;color:#b3b3b3;\">*0默认，正整数从大到小排序</p>\r\n      </div>\r\n      <Button\r\n        v-show=\"btnAdd\"\r\n        ref=\"btn_add\"\r\n        type=\"primary\"\r\n        long\r\n        class=\"marilyn_margin\"\r\n        @click=\"addClass\"\r\n      >添加</Button>\r\n      <Button\r\n        v-show=\"!btnAdd\"\r\n        disabled\r\n        ref=\"btn_add\"\r\n        type=\"primary\"\r\n        long\r\n        class=\"marilyn_margin\"\r\n        @click=\"addClass\"\r\n      >添加</Button>\r\n    </Modal>\r\n    <Modal v-model=\"deleteModel\" width=\"360\">\r\n      <p slot=\"header\" style=\"color:#f60;text-align:center\">\r\n        <Icon type=\"ios-information-circle\"></Icon>\r\n        <span>删除确认</span>\r\n      </p>\r\n      <div style=\"text-align:center\">\r\n        <p>是否继续删除？</p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button type=\"error\" size=\"large\" long :loading=\"modal_loading\" @click=\"toolDelete\">删除</Button>\r\n      </div>\r\n    </Modal>\r\n    <Modal v-model=\"editModel\" width=\"360\">\r\n      <p slot=\"header\" style=\"color:#2d8cf0;text-align:center\">\r\n        <span>修改</span>\r\n      </p>\r\n      <div style=\"text-align:center\">\r\n        <div style=\"position:relative;height:164px;width:100%\">\r\n          <input type=\"file\" class=\"inputfile\" name=\"file\" @change=\"modifyUpload\" id=\"fileImg\">\r\n          <img :src=\"gameImgurl + updateImage\" alt class=\"curtimg\">\r\n        </div>\r\n        <div>\r\n          中文名字 :\r\n          <Input\r\n            class=\"judgename_edit\"\r\n            prefix=\"logo-buffer\"\r\n            placeholder=\"分类名字 ...\"\r\n            style=\"width:auto;margin:10px 0\"\r\n            v-model=\"updateName\"\r\n          />\r\n        </div>\r\n        <div>\r\n          英文名字 :\r\n          <Input\r\n            prefix=\"logo-buffer\"\r\n            placeholder=\"分类名字 ...\"\r\n            style=\"width:auto;margin:10px 0\"\r\n            v-model=\"updateEnName\"\r\n          />\r\n        </div>\r\n        <div>\r\n          排&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp序 :\r\n          <Input placeholder=\"排序序号 ...\" style=\"width: auto;margin:10px 0\" v-model=\"updateOrder\">\r\n            <Icon type=\"logo-buffer\" slot=\"prefix\"/>\r\n          </Input>\r\n          <p style=\"font-size:12px;color:#b3b3b3;padding-left:30px\">*0默认，正整数从大到小排序</p>\r\n        </div>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button\r\n          v-show=\"btnEdit\"\r\n          ref=\"btn_edit\"\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          long\r\n          :loading=\"modal_loading\"\r\n          @click=\"toolEdit\"\r\n        >确认</Button>\r\n        <Button\r\n          v-show=\"!btnEdit\"\r\n          disabled\r\n          ref=\"btn_edit\"\r\n          type=\"primary\"\r\n          size=\"large\"\r\n          long\r\n          :loading=\"modal_loading\"\r\n          @click=\"toolEdit\"\r\n        >确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  classIndex,\r\n  classAdd,\r\n  classDelete,\r\n  classUpdate,\r\n  gameImgurl,\r\n  judgeName,\r\n  onfocus,\r\n  onblur\r\n} from \"@/api/index\";\r\nimport { setTimeout } from \"timers\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      btnAdd: true,\r\n      btnEdit: true,\r\n      datalist: [],\r\n      marilynName: \"\",\r\n      marilynEnName: \"\",\r\n      marilynOrder: \"\",\r\n      addCard: false,\r\n      deleteModel: false,\r\n      modal_loading: false,\r\n      currentDelete: \"\",\r\n      editState: false, // 关闭状态\r\n      editModel: false,\r\n      updateName: \"\",\r\n      updateEnName: \"\",\r\n      updateOrder: \"\",\r\n      updateId: \"\",\r\n      spinShow: true,\r\n      gameUpload: \"\",\r\n      marilynimg: \"\",\r\n      updateImage: \"\",\r\n      gameImgurl: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    var judgename_add = document\r\n      .querySelector(\".judgename_add\")\r\n      .querySelector(\"input\");\r\n    var judgename_edit = document\r\n      .querySelector(\".judgename_edit\")\r\n      .querySelector(\"input\");\r\n\r\n    onfocus(judgename_add, () => {\r\n      judgename_add.style.border = \"1px solid #2d8cf0\";\r\n      this.btnAdd = true;\r\n    });\r\n    onblur(judgename_add, () => {\r\n      judgeName({ name: this.marilynName, type: \"class\" }).then(res => {\r\n        if (res.state == 0) {\r\n          if (this.addCard) {\r\n            this.btnAdd = false;\r\n            this.$Message.error(\"名字为空或该名字已存在\");\r\n            judgename_add.style.border = \"1px solid red\";\r\n            setTimeout(() => {\r\n              judgename_add.style.border = \"1px solid #dcdee2\";\r\n            }, 2000);\r\n          }\r\n        }\r\n      });\r\n    });\r\n    onfocus(judgename_edit, () => {\r\n      judgename_edit.style.border = \"1px solid #2d8cf0\";\r\n      this.btnEdit = true;\r\n    });\r\n    onblur(judgename_edit, () => {\r\n      judgeName({\r\n        name: this.updateName,\r\n        type: \"class\",\r\n        id: this.updateId\r\n      }).then(res => {\r\n        if (res.state == 0) {\r\n          if (this.editModel) {\r\n\r\n            this.btnEdit = false;\r\n            this.$Message.error(\"名字为空或该名字已存在\");\r\n            judgename_edit.style.border = \"1px solid red\";\r\n            setTimeout(() => {\r\n              judgename_edit.style.border = \"1px solid #dcdee2\";\r\n            }, 2000);\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    this.gameImgurl = gameImgurl;\r\n    this.getData();\r\n  },\r\n  watch: {\r\n    $route(to, from) {},\r\n    addCard(value) {\r\n      this.btnAdd = true;\r\n    },\r\n    editModel(value){\r\n      this.btnEdit = true;\r\n    }\r\n  },\r\n  methods: {\r\n    getData() {\r\n      this.spinShow = true;\r\n      classIndex().then(res => {\r\n        if (res.state === \"1\") {\r\n          this.datalist = res.msg;\r\n          this.spinShow = false;\r\n        }\r\n      });\r\n    },\r\n    uploadSuccess(res, file) {},\r\n    addClass() {\r\n      if (this.marilynName.trim().length !== 0) {\r\n        let data = new FormData();\r\n        data.append(\"file\", this.file);\r\n        data.append(\"name\", this.marilynName);\r\n        data.append(\"alias\", this.marilynEnName);\r\n        data.append(\"order\", this.marilynOrder || this.datalist.length + 1);\r\n        const option = {\r\n          method: \"post\",\r\n          body: data\r\n        };\r\n        fetch(classAdd, option)\r\n          .then(res => res.json())\r\n          .then(resJson => {\r\n            if (resJson.state === \"1\") {\r\n              this.$Message.success(resJson.msg);\r\n              this.getData();\r\n              this.marilynName = \"\";\r\n              this.marilynEnName = \"\";\r\n              this.marilynOrder = \"\";\r\n              this.addCard = false;\r\n            } else {\r\n              this.$Message.error(resJson.msg);\r\n            }\r\n          });\r\n      } else {\r\n        this.$Message.error(\"分类名称不要为空噢\");\r\n      }\r\n    },\r\n    toolDelete() {\r\n      this.modal_loading = true;\r\n      classDelete({\r\n        id: this.currentDelete\r\n      }).then(res => {\r\n        this.modal_loading = false;\r\n        if (res.state === \"1\") {\r\n          this.deleteModel = false;\r\n          this.$Message.success(res.msg);\r\n          this.getData();\r\n        } else {\r\n          this.$Message.error(res.msg);\r\n        }\r\n      });\r\n    },\r\n    toolEdit() {\r\n      this.modal_loading = true;\r\n      let data = new FormData();\r\n      if (this.currentImg) {\r\n        data.append(\"file\", this.currentImg);\r\n      }\r\n      data.append(\"id\", this.updateId);\r\n      data.append(\"name\", this.updateName);\r\n      data.append(\"alias\", this.updateEnName);\r\n      data.append(\"order\", this.updateOrder);\r\n      const option = {\r\n        method: \"post\",\r\n        body: data\r\n      };\r\n      fetch(classUpdate, option)\r\n        .then(res => res.json())\r\n        .then(resJson => {\r\n          this.modal_loading = false;\r\n          if (resJson.state === \"1\") {\r\n            this.$Message.success(resJson.msg);\r\n            this.updateId = \"\";\r\n            this.updateName = \"\";\r\n            this.updateEnName = \"\";\r\n            this.updateOrder = \"\";\r\n            this.getData();\r\n            this.editModel = false;\r\n          } else {\r\n            this.$Message.error(resJson.msg);\r\n          }\r\n        });\r\n      // classUpdate({\r\n      //   id: this.updateId,\r\n      //   name: this.updateName,\r\n      //   order: this.updateOrder\r\n      // }).then(res => {\r\n      //   this.modal_loading = false\r\n      //   if(res.state === \"1\") {\r\n      //     this.$Message.success(res.msg)\r\n      //     this.updateId = \"\"\r\n      //     this.updateName = \"\"\r\n      //     this.updateOrder = \"\"\r\n      //     this.getData()\r\n      //     this.editModel = false\r\n      //   } else {\r\n      //     this.$Message.error(res.msg)\r\n      //   }\r\n      // })\r\n    },\r\n    handleUpload(file) {\r\n      var self = this;\r\n      var reader = new FileReader(),\r\n        img = new Image();\r\n      reader.readAsDataURL(file);\r\n      reader.onload = function(e) {\r\n        self.marilynimg = e.target.result;\r\n      };\r\n      this.file = file;\r\n    },\r\n    modifyUpload(e) {\r\n      var self = this;\r\n      this.currentImg = e.currentTarget.files[0];\r\n      var reader = new FileReader(),\r\n        img = new Image();\r\n      reader.readAsDataURL(this.currentImg);\r\n      reader.onload = function(e) {\r\n        document.querySelector(\".curtimg\").src = e.target.result;\r\n      };\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.upload_image {\r\n  position: absolute;\r\n  top: 0;\r\n  height: 100%;\r\n}\r\n\r\n.inputfile {\r\n  height: 164px;\r\n  width: 164px;\r\n  position: absolute;\r\n  top: 0;\r\n  opacity: 0;\r\n}\r\n\r\n.curtimg {\r\n  height: 164px;\r\n  width: 164px;\r\n}\r\n</style>\r\n\r\n\r\n"]}]}