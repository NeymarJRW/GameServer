{"remainingRequest":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/gaga/Desktop/GameServer/src/views/Manage/Games.vue?vue&type=style&index=0&id=9b3eb99e&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/gaga/Desktop/GameServer/src/views/Manage/Games.vue","mtime":1573113485410},{"path":"/Users/gaga/Desktop/GameServer/node_modules/css-loader/index.js","mtime":1557114191000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1557114192000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/postcss-loader/src/index.js","mtime":1557114192000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/stylus-loader/index.js","mtime":1557114221000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/cache-loader/dist/cjs.js","mtime":1558076220000},{"path":"/Users/gaga/Desktop/GameServer/node_modules/vue-loader/lib/index.js","mtime":1557114192000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container {\n  padding-top: 20px;\n}\n\n.marilyn_tab {\n  padding-bottom: 5.333333rem; /* 200/37.5 */\n  margin-top: 20px;\n}\n\n.marilyn_card_add {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.addgame {\n  width: 100%;\n}\n\n.add_game_view {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.marilyn_tools {\n  margin-top: 20px;\n}\n\n.upload_image {\n  position: absolute;\n  top: 0;\n  height: 100%;\n}\n\n.inputfile {\n  height: 164px;\n  width: 164px;\n  position: absolute;\n  top: 0;\n  opacity: 0;\n}\n\n.curtimg {\n  height: 164px;\n  width: 164px;\n}\n\n.page {\n  text-align: center;\n  width: calc(100% - 16rem /* 600/37.5 */);\n  padding: 0.8rem /* 30/37.5 */ /* 20/37.5 */ 0;\n  background: rgb(240, 242, 245);\n  position: fixed;\n  bottom: 0;\n}\n\n.xialai span {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.sousuo {\n  position: absolute;\n  top: 20px;\n  width: 200px;\n  left: 480px;\n}\n",{"version":3,"sources":["Games.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyyCA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Games.vue","sourceRoot":"src/views/Manage","sourcesContent":["<template>\n  <div class=\"container\">\n    <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n\n    <!-- 全部游戏 -->\n    <Button type=\"primary\" @click=\"allgame\" style=\"margin-left: 20px;\">全部游戏</Button>\n\n    <!-- 选择分类 -->\n    <Dropdown style=\"margin-left: 20px;\">\n      <Button type=\"primary\" style=\"width:100px\">\n        {{showtype.length>0 ? showtype :'选择分类'}}\n        <Icon type=\"ios-arrow-down\"></Icon>\n      </Button>\n      <DropdownMenu slot=\"list\" class=\"xialai\">\n        <DropdownItem v-for=\"item in gametype\">\n          <span @click=\"selecttype(item)\">{{item}}</span>\n        </DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n\n    <!-- 选择标签 -->\n    <Dropdown style=\"margin-left: 20px\">\n      <Button type=\"primary\" style=\"width:100px\">\n        {{showtip.length>0 ? showtip :'选择标签'}}\n        <Icon type=\"ios-arrow-down\"></Icon>\n      </Button>\n      <DropdownMenu slot=\"list\" class=\"xialai\">\n        <DropdownItem v-for=\"item in gametip\">\n          <span @click=\"selecttip(item)\">{{item}}</span>\n        </DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n\n    <!-- 选择平台 -->\n    <Dropdown style=\"margin-left: 20px\">\n      <Button type=\"primary\" style=\"width:100px\">\n        {{showpingtai.length>0 ? showpingtai :'选择平台'}}\n        <Icon type=\"ios-arrow-down\"></Icon>\n      </Button>\n      <DropdownMenu slot=\"list\" class=\"xialai\">\n        <DropdownItem v-for=\"item in pigntaitip\">\n          <span @click=\"selectpigntai(item)\">{{item}}</span>\n        </DropdownItem>\n      </DropdownMenu>\n    </Dropdown>\n\n    <!-- 按游戏名搜索 -->\n    <Input\n      class=\"sousuo\"\n      v-model=\"searchvalue\"\n      search\n      enter-button\n      placeholder=\"按游戏名搜索\"\n      @on-search=\"search\"\n    />\n\n    <div class=\"marilyn_tab\" ref=\"marilyn_tab\" id=\"totop\">\n      <Card class=\"marilyn_card marilyn_card_add\" ref=\"#top\">\n        <div class=\"add_game_view\" @click=\"addCard = true\">\n          <img src=\"../../images/add.png\" style=\"height:164px;width:164px\">\n          <span>添加游戏</span>\n        </div>\n      </Card>\n      <Card class=\"marilyn_card\" v-for=\"i in datalist\">\n        <div style=\"text-align:center\">\n          <img :src=\"gameImgurl + i.image\" class=\"marilyn_img\">\n          <p class=\"marilyn_des\">中文名称 : {{i.name}}  </p>\n          <p class=\"marilyn_des\">英文名称 : {{i.alias}} </p>\n          <p class=\"marilyn_des\">\n            游戏地址 :\n            <a target=\"_Blank\" :href=\"i.type=='0' ? gameImgurl + i.url : i.url\">{{i.url}}</a>\n          </p>\n          <p class=\"marilyn_des\">创建时间 : {{i.time}}</p>\n          <p class=\"marilyn_des\">所属分类: {{i.class.name}}</p>\n          <p class=\"marilyn_des\">\n            所属标签 :\n            <template v-for=\"v in i.label\">{{v.name}},</template>\n          </p>\n          <p\n            class=\"marilyn_des\"\n          >游戏平台 : {{(i.android==1 ? '安卓,' : '')+(i.ios==1 ? 'ios,' : '')+(i.wechat==1 ? '小程序' : '')}}</p>\n          <p\n            class=\"marilyn_des\"\n          >游戏类型 : {{i.type ? (i.type==0 ? '游戏' : (i.type==1 ? 'ios' : 'android' ) ) : '未定义' }}</p>\n\n          <p class=\"marilyn_des\">\n            屏幕方向 :\n            <template v-if=\"i.screen == 0\">竖屏</template>\n            <template v-else>横屏</template>\n          </p>\n          <p class=\"marilyn_des\">\n            是否推荐 :\n            <template v-if=\"i.recommend == 0\">不推荐</template>\n            <template v-else>推荐</template>\n          </p>\n          <p class=\"marilyn_des\">游戏权重 : {{i.weight}}</p>\n          <p class=\"marilyn_des\">游戏标记问题 : {{i.weight}}</p>\n          <Button\n            type=\"primary\"\n            style=\"width:100px\"\n            @click=\"markclick(i),dialogTableVisible = true\"\n          >标记</Button>\n        </div>\n        <div class=\"marilyn_tools\">\n          <i\n            class=\"fas fa-trash-alt\"\n            style=\"cursor:pointer;color:#ed4014\"\n            @click=\"currentDelete = i.id; deleteModel = !deleteModel\"\n          ></i>\n          <i class=\"far fa-edit\" style=\"cursor:pointer\" @click=\"editEvent(i)\"></i>\n        </div>\n      </Card>\n    </div>\n\n    <!-- <Modal v-model=\"clear\" width=\"480\" height=\"600\" style=\"width:400px\">\n             <p slot=\"header\" style=\"color:#2d8cf0;text-align:center\">\n                <span>清空缓存类型</span>\n              </p>\n             <Select\n              v-model=\"clear_value\"\n              multiple\n            >\n              <Option v-for=\"(item,index) in clearcon\" :value=\"item.value\" :key=\"index\">{{item.content}}</Option>\n            </Select>\n             <div slot=\"footer\">\n        <Button\n          v-show='btnEdit'\n          ref=\"btn_edit\"\n          class='btn_edit'\n          type=\"primary\"\n          size=\"large\"\n          long\n          :loading=\"modal_loading\"\n\n        >确认</Button>\n\n      </div>\n    </Modal>-->\n    <!-- problemreason -->\n    <Modal v-model=\"dialogTableVisible\" width=\"480\" height=\"600\" style=\"width:400px\">\n      <p slot=\"header\" style=\"color:#2d8cf0;text-align:center\">\n        <span>选择游戏问题类型</span>\n      </p>\n      <Select v-model=\"problemreason_value\" multiple>\n        <Option v-for=\"(item,index) in problemreason\" :value=\"item.id\" :key=\"index\">{{item.content}}</Option>\n      </Select>\n      <div slot=\"footer\">\n        <Button\n          v-show=\"btnEdit\"\n          ref=\"btn_edit\"\n          class=\"btn_edit\"\n          type=\"primary\"\n          size=\"large\"\n          long\n          :loading=\"modal_loading\"\n          @click=\"prolome\"\n        >确认</Button>\n      </div>\n    </Modal>\n    <!-- 增加 -->\n    <Modal v-model=\"addCard\" width=\"480\" footer-hide>\n      <Card class=\"marilyn_card addgame\">\n        <div style=\"text-align:center\" class=\"marilyn_up_card\">\n          <Upload\n            style=\"margin:0 auto\"\n            multiple\n            type=\"drag\"\n            :action=\"gameUpload\"\n            name=\"file\"\n            :on-success=\"uploadSuccess\"\n            :show-upload-list=\"false\"\n            :format=\"['jpg','jpeg','png','gif']\"\n            :before-upload=\"handleUpload\"\n          >\n            <div style=\"padding: 20px 0;width:200px\">\n              <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n              <p>单击或拖动图片到此处上传</p>\n            </div>\n            <img :src=\"marilynNewImg\" class=\"upload_image\" alt>\n          </Upload>\n\n          <div class=\"marilyn_margin\">\n            中文名称 :\n            <Input\n              class=\"judgename_add\"\n              prefix=\"ios-game-controller-b\"\n              placeholder=\"中文游戏名称 ...\"\n              style=\"width: 200px\"\n              v-model=\"marilynName\"\n            />\n          </div>\n          <div class=\"marilyn_margin\">\n            英文名称 :\n            <Input\n              prefix=\"ios-game-controller-b-outline\"\n              placeholder=\"英文游戏名称 ...\"\n              style=\"width: 200px\"\n              v-model=\"marilynAlias\"\n            />\n          </div>\n\n          <div\n            class=\"marilyn_margin\"\n            style=\"display:flex;align-items: center;justify-content:center\"\n          >\n            所属分类 :\n            <Select v-model=\"marilynSelect\" style=\"width:186px;margin-left:6px;text-align: left;\">\n              <Option v-for=\"item in classList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </div>\n\n          <div class=\"marilyn_margin\">\n            所属标签 :\n            <Select\n              v-model=\"marilynTag\"\n              multiple\n              style=\"width:186px;margin-left:6px;text-align: left;\"\n            >\n              <Option v-for=\"item in tagLists\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </div>\n          <div class=\"marilyn_margin\">\n            游戏平台 :\n            <Select\n              v-model=\"pingtaivalue\"\n              multiple\n              style=\"width:186px;margin-left:6px;text-align: left;\"\n            >\n              <Option v-for=\"item in pingtailists\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </div>\n          <div class=\"marilyn_margin\">\n            游戏类型 :\n            <Select v-model=\"marilynType\" style=\"width:186px;margin-left:6px;text-align: left;\">\n              <Option v-for=\"item in typeLists\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </div>\n\n          <div\n            class=\"marilyn_margin\"\n            v-show=\"marilynType== '1' ? true :(marilynType== '2' ? true :false )\"\n          >\n            所属地址 :\n            <Input\n              prefix=\"md-pricetags\"\n              placeholder=\"请输入游戏地址 ...\"\n              style=\"width: 200px\"\n              v-model=\"marilynUrl\"\n            />\n          </div>\n          <Upload\n            v-show=\"marilynType== '0' ? true :false\"\n            style=\"margin-top:15px;margin:15px auto\"\n            multiple\n            type=\"drag\"\n            :action=\"gameUpload\"\n            name=\"file\"\n            :on-success=\"uploadSuccess\"\n            :show-upload-list=\"false\"\n            :format=\"['zip']\"\n            :before-upload=\"zipUpload\"\n          >\n            <div style=\"padding: 20px 0;width:200px\">\n              <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n              <p>\n                单击或拖动zip格式\n                <br>游戏压缩包到此处上传\n              </p>\n              <p v-if=\"uploaded\" style=\"margin-top:15px\">{{uploadtitle}}</p>\n            </div>\n          </Upload>\n\n          <div\n            class=\"marilyn_margin\"\n            style=\"display:flex;align-items: center;justify-content:center\"\n          >\n            屏幕方向 :\n            <Select v-model=\"marilyndir\" style=\"width:186px;margin-left:6px;text-align: left;\">\n              <Option\n                v-for=\"item in directionLists\"\n                :value=\"item.value\"\n                :key=\"item.value\"\n              >{{ item.name }}</Option>\n            </Select>\n          </div>\n          <div\n            class=\"marilyn_margin\"\n            style=\"display:flex;align-items: center;justify-content:center\"\n          >\n            是否推荐 :\n            <Select v-model=\"marilyncom\" style=\"width:186px;margin-left:6px;text-align: left;\">\n              <Option\n                v-for=\"item in commendLists\"\n                :value=\"item.value\"\n                :key=\"item.value\"\n              >{{ item.name }}</Option>\n            </Select>\n          </div>\n          <div\n            class=\"marilyn_margin\"\n            style=\"display:flex;align-items: center;justify-content:center\"\n          >\n            <span style=\"padding-right:5px\">权重数值 :</span>\n            <Input type=\"text\" prefix=\"md-pie\" style=\"width: 200px\" v-model=\"marilynnum\"/>\n          </div>\n          <div\n            class=\"marilyn_margin\"\n            style=\"display:flex;align-items: center;justify-content:center\"\n          >\n            <span style=\"padding-right:5px;color:#b3b3b3\">*权重数值:1默认，正整数从大到小推荐</span>\n          </div>\n          <div class=\"marilyn_margin\">\n            <Button\n              v-show=\"btnAdd\"\n              ref=\"btn_add\"\n              id=\"btn\"\n              type=\"primary\"\n              @click=\"addGame\"\n              style=\"width: 200px\"\n            >添加</Button>\n            <Button\n              v-show=\"!btnAdd\"\n              disabled\n              class=\"btn\"\n              type=\"primary\"\n              @click=\"addGame\"\n              style=\"width: 200px\"\n            >添加</Button>\n          </div>\n        </div>\n      </Card>\n    </Modal>\n    <!-- 删除 -->\n    <Modal v-model=\"deleteModel\" width=\"360\">\n      <p slot=\"header\" style=\"color:#f60;text-align:center\">\n        <Icon type=\"ios-information-circle\"></Icon>\n        <span>删除确认</span>\n      </p>\n      <div style=\"text-align:center\">\n        <p>确认删除游戏</p>\n      </div>\n      <div slot=\"footer\">\n        <Button type=\"error\" size=\"large\" long :loading=\"modal_loading\" @click=\"toolDelete\">删除</Button>\n      </div>\n    </Modal>\n    <!-- 修改 -->\n    <Modal v-model=\"editModel\" width=\"480\">\n      <p slot=\"header\" style=\"color:#2d8cf0;text-align:center\">\n        <span>修改</span>\n      </p>\n      <div style=\"text-align:center\">\n        <div style=\"position:relative;display:flex;justify-content:center\">\n          <input type=\"file\" class=\"inputfile\" name=\"file\" @change=\"modifyUpload\" id=\"fileImg\">\n          <img\n            :src=\"currentEdit.thumbnail ? gameImgurl + currentEdit.thumbnail : '' \"\n            alt\n            style=\"width:50px;height:50px;display:block;\"\n            class=\"curtimg\"\n          >\n        </div>\n        <div>\n          中文名称 : &nbsp;&nbsp;\n          <Input\n            class=\"judgename_edit\"\n            prefix=\"ios-game-controller-b\"\n            placeholder=\"游戏中文名称 ...\"\n            style=\"width:200px;margin:5px 0\"\n            v-model=\"currentEdit.name\"\n          />\n        </div>\n        <div>\n          英文名称 : &nbsp;&nbsp;\n          <Input\n            prefix=\"ios-game-controller-b-outline\"\n            placeholder=\"游戏英文名称 ...\"\n            style=\"width:200px;margin:5px 0\"\n            v-model=\"currentEdit.alias\"\n          />\n        </div>\n\n        <div>\n          所属分类 :\n          <Select\n            prefix=\"logo-buffer\"\n            v-model=\"classId\"\n            placeholder=\"所属游戏分类 ...\"\n            style=\"width:200px;text-align: left;margin-left:6px;margin-bottom:5px;margin-top:5px\"\n          >\n            <Option v-for=\"item in classList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n          </Select>\n        </div>\n        <div>\n          所属标签 :\n          <Select\n            v-model=\"labelId\"\n            multiple\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n          >\n            <Option v-for=\"item in tagLists\" :value=\"item.id\" :key=\"item.name\">{{ item.name }}</Option>\n          </Select>\n        </div>\n        <div>\n          游戏平台 :\n          <Select\n            v-model=\"editPTvalue\"\n            multiple\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n          >\n            <Option\n              v-for=\"item in editpingtaivalue\"\n              :value=\"item.name\"\n              :key=\"item.name\"\n            >{{ item.name }}</Option>\n          </Select>\n        </div>\n\n        <div>\n          游戏类型 :\n          <Select\n            v-model=\"typeId\"\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n          >\n            <Option v-for=\"item in typeLists\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n          </Select>\n        </div>\n\n        <div v-show=\"typeId== '1' ? true :(typeId== '2' ? true :false) \">\n          所属地址 : &nbsp;&nbsp;\n          <Input\n            prefix=\"md-pricetags\"\n            placeholder=\"所属游戏地址 ...\"\n            style=\"width:200px;margin:5px 0\"\n            v-model=\"currentEdit.url\"\n          />\n        </div>\n        <Upload\n          v-show=\"typeId== '0' ? true :false\"\n          style=\"margin:15px auto;width:200px\"\n          multiple\n          type=\"drag\"\n          :action=\"gameUpload\"\n          name=\"file\"\n          :on-success=\"uploadSuccess\"\n          :show-upload-list=\"false\"\n          :format=\"['zip']\"\n          :before-upload=\"zipUpload\"\n        >\n          <div style=\"padding: 20px 0;width:200px\">\n            <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n            <p>\n              单击或拖动zip格式\n              <br>游戏压缩包到此处上传\n            </p>\n            <p v-if=\"uploaded\" style=\"margin-top:15px\">{{uploadtitle}}</p>\n          </div>\n        </Upload>\n        <div>\n          屏幕方向 :\n          <Select\n            v-model=\"currentEdit.screen\"\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n          >\n            <Option\n              v-for=\"item in directionLists\"\n              :value=\"item.value\"\n              :key=\"item.value\"\n            >{{ item.name }}</Option>\n          </Select>\n        </div>\n        <div>\n          是否推荐 :\n          <Select\n            v-model=\"currentEdit.recommend\"\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n          >\n            <Option\n              v-for=\"item in commendLists\"\n              :value=\"item.value\"\n              :key=\"item.value\"\n            >{{ item.name }}</Option>\n          </Select>\n        </div>\n        <div>\n          权重数值 :\n          <Input\n            type=\"text\"\n            prefix=\"md-pie\"\n            style=\"width:200px;margin-left:6px;text-align: left;margin-top:5px\"\n            v-model=\"currentEdit.weight\"\n          />\n          <p style=\"font-size:12px;color:#b3b3b3;padding-left:50px\">*1默认，正整数从大到小推荐</p>\n        </div>\n      </div>\n      <div slot=\"footer\">\n        <Button\n          v-show=\"btnEdit\"\n          ref=\"btn_edit\"\n          id=\"btn_edit\"\n          type=\"primary\"\n          size=\"large\"\n          long\n          :loading=\"modal_loading\"\n          @click=\"toolEdit\"\n        >确认</Button>\n        <Button\n          v-show=\"!btnEdit\"\n          disabled\n          ref=\"btn_edit\"\n          type=\"primary\"\n          size=\"large\"\n          long\n          :loading=\"modal_loading\"\n          @click=\"toolEdit\"\n        >确认</Button>\n      </div>\n    </Modal>\n\n    <!-- MODAL↑-->\n    <Page\n      :total=\"datacount\"\n      :page-size=\"pagesize\"\n      :current.sync=\"pageindex\"\n      @on-change=\"changepage\"\n      show-elevator\n      class=\"page\"\n    />\n  </div>\n</template>\n\n<script>\nimport {\n  mark,\n  problemReason,\n  gameIndex,\n  gameImgurl,\n  classIndex,\n  gameDelete,\n  labelIndex,\n  gameuploadUri,\n  gameUpdate,\n  zipuploadUrl,\n  judgeName,\n  onfocus,\n  onblur,\n  clear\n} from \"@/api/index\";\nimport axios from \"axios\";\nimport { setInterval, clearTimeout, setTimeout } from \"timers\";\nexport default {\n  data() {\n    return {\n      pageindex: 1,\n      clear: false,\n      markid: \"\",\n      btnAdd: true,\n      btnEdit: true,\n      totaldatalist: [],\n      datalist: [],\n      datacount: 0, //一共几条游戏\n      pagesize: 9, //分页\n      classList: [],\n      tagLists: [],\n      typeLists: [\n        { id: \"0\", name: \"游戏\" },\n        { id: \"1\", name: \"ios\" },\n        { id: \"2\", name: \"android\" }\n      ],\n      pingtailists: [\n        { id: \"2\", name: \"android\" },\n        { id: \"1\", name: \"ios\" },\n        { id: \"0\", name: \"小程序\" }\n      ],\n      pingtaivalue: \"\",\n      editpingtaivalue: [],\n      editPTvalue: [],\n      savegamearr: [], //选择后存储当前的游戏数量,联动选择\n      savegameflag: true, //分类,或标签,平台其中任意一个选择时为假\n      typeflag: false, //联动检索判断\n      tipflag: false, //联动检索判断\n      pingtaiflag: false, //联动检索判断\n      connectflag: false, //联动检索判断 为true 联动开启\n      connectarr: [],\n      pigntaitip: [\"ios\", \"安卓\", \"小程序\"],\n      gametype: [], //游戏分类\n      showtype: \"\", //显示游戏分类\n      gametip: [], //游戏标签\n      showtip: \"\", //显示游戏标签\n      showpingtai: \"\", //显示选择平台\n      searchvalue: \"\", //搜索框的值\n      file: \"\",\n      zipfile: \"\",\n      zipfileUrl: \"\",\n      gameImgurl: \"\",\n      zipuploadUrl: \"\",\n      gameUpload: \"\",\n      gameuploadUri: \"\",\n      uploaded: false,\n      uploadtitle: \"已上传0%\",\n      marilynName: \"\",\n      marilynAlias: \"\",\n      marilynUrl: \"\",\n      marilynTag: \"\",\n      marilynType: \"\",\n      marilyndir: \"\",\n      marilyncom: \"\",\n      marilynnum: 1,\n      marilynSelect: \"\",\n      currentDelete: \"\",\n      deleteModel: false,\n      editModel: false,\n      modal_loading: false,\n      currentEdit: {},\n      marilynNewImg: \"\",\n      spinShow: true,\n      labelId: [],\n      typeId: [],\n      classId: \"\",\n      currentImg: null,\n      addCard: false,\n      dialogTableVisible: false,\n      formLabelWidth: \"120px\",\n      problemreason: [],\n      directionLists: [\n        {\n          value: \"0\",\n          name: \"竖屏\"\n        },\n        {\n          value: \"1\",\n          name: \"横屏\"\n        }\n      ],\n      commendLists: [\n        {\n          value: \"0\",\n          name: \"不推荐\"\n        },\n        {\n          value: \"1\",\n          name: \"推荐\"\n        }\n      ],\n      problemreason_value: [],\n      clear_value: [],\n      clearcon: [\n        {\n          value: \"index\",\n          content: \"首页\"\n        },\n        {\n          value: \"recommend\",\n          content: \"推荐\"\n        },\n        {\n          value: \"news\",\n          content: \"最新\"\n        },\n        {\n          value: \"hot\",\n          content: \"最热\"\n        },\n        {\n          value: \"class\",\n          content: \"分类推荐\"\n        },\n        {\n          value: \"label\",\n          content: \"标签推荐\"\n        },\n        {\n          value: \"all\",\n          content: \"全部缓存\"\n        }\n      ]\n    };\n  },\n  mounted() {\n    this.problemList();\n    var judgename_add = document\n      .querySelector(\".judgename_add\")\n      .querySelector(\"input\");\n    var judgename_edit = document\n      .querySelector(\".judgename_edit\")\n      .querySelector(\"input\");\n\n    onfocus(judgename_add, () => {\n      judgename_add.style.border = \"1px solid #2d8cf0\";\n      this.btnAdd = true;\n    });\n    onblur(judgename_add, () => {\n      judgeName({ name: this.marilynName, type: \"game\" }).then(res => {\n        if (res.state == 0) {\n          if (this.addCard) {\n            this.btnAdd = false;\n            this.$Message.error(\"名字为空或该名字已存在\");\n            judgename_add.style.border = \"1px solid red\";\n            setTimeout(() => {\n              judgename_add.style.border = \"1px solid #dcdee2\";\n            }, 2000);\n          } else {\n            this.btnAdd = true;\n          }\n        }\n      });\n    });\n    onfocus(judgename_edit, () => {\n      judgename_edit.style.border = \"1px solid #2d8cf0\";\n      this.btnEdit = true;\n    });\n    onblur(judgename_edit, () => {\n      this.btnEdit = true;\n      judgeName({\n        name: this.currentEdit.name,\n        type: \"game\",\n        id: this.currentDelete\n      }).then(res => {\n        if (res.state == 0) {\n          if (this.editModel) {\n            this.btnEdit = false;\n            this.$Message.error(\"名字为空或该名字已存在\");\n            judgename_edit.style.border = \"1px solid red\";\n            setTimeout(() => {\n              judgename_edit.style.border = \"1px solid #dcdee2\";\n            }, 2000);\n          }\n        }\n      });\n    });\n\n    this.zipuploadUrl = zipuploadUrl;\n    this.gameImgurl = gameImgurl;\n    this.gameuploadUri = gameuploadUri;\n    this.getData();\n    classIndex().then(res => {\n      if (res.state === \"1\") {\n        this.classList = res.msg;\n      }\n    });\n    labelIndex().then(res => {\n      if (res.state === \"1\") {\n        this.tagLists = res.msg;\n      }\n    });\n  },\n\n  methods: {\n    markclick(i) {\n      this.markid = i.id;\n    },\n    prolome() {\n      mark({\n        id: this.markid,\n        tab: this.problemreason_value.join(\",\")\n      }).then(res => {\n        // console.log(res)\n        if (res.msg == \"标记成功！\") {\n          this.$message({\n            message: \"标记成功\",\n            type: \"success\"\n          });\n        } else {\n          this.$message.error(\"标记失败\");\n        }\n      });\n      this.getData();\n      this.dialogTableVisible = false;\n    },\n    editEvent(e) {\n      //   {id:\"2\",name: \"android\" },\n      //   {id:\"1\",name: \"ios\" },\n      //   {id:\"0\",name: \"小程序\" }\n      this.editpingtaivalue.push({ name: \"android\", value: e.android });\n      this.editpingtaivalue.push({ name: \"ios\", value: e.ios });\n      this.editpingtaivalue.push({ name: \"wechat\", value: e.wechat });\n      if (e.android == 1) {\n        this.editPTvalue.push(\"android\");\n      }\n      if (e.ios == 1) {\n        this.editPTvalue.push(\"ios\");\n      }\n      if (e.wechat == 1) {\n        this.editPTvalue.push(\"wechat\");\n      }\n\n      this.labelId = [];\n      this.currentEdit = e;\n      this.editModel = true;\n      this.typeId = e.type;\n      // console.log(this.typeId);\n      for (var i = 0; i < e.label.length; i++) {\n        this.labelId.push(e.label[i].id);\n      }\n      this.classId = e.class.id;\n    },\n    getpage(res) {\n      this.totaldatalist = res;\n      this.datacount = this.totaldatalist.length;\n      if (this.datacount < this.pagesize) {\n        this.datalist = this.totaldatalist;\n      } else {\n        this.datalist = this.totaldatalist.slice(0, this.pagesize);\n      }\n    },\n    problemList() {\n      problemReason().then(res => {\n        // console.log(res.msg)\n        // let arr = []\n        // for ( var i = 0; i <res.msg.length; i++){\n        //     arr.push(res.msg[i].content)\n        // }\n        // console.log(arr)\n        this.problemreason = res.msg;\n      });\n    },\n    getData() {\n      // this.connect()\n      this.spinShow = true;\n      gameIndex().then(res => {\n        if (res.state === \"1\") {\n          // console.log(res.msg)\n          this.spinShow = false;\n          if (res.msg == \"数据为空！\") {\n            this.getpage(\"\");\n          } else {\n            var len = res.msg.length;\n            for (var i = 0; i < len; i++) {\n              //获取游戏分类\n              if (this.gametype.indexOf(res.msg[i].class.name) == -1) {\n                this.gametype.push(res.msg[i].class.name);\n              }\n              var tip_len = res.msg[i].label.length;\n              for (var j = 0; j < tip_len; j++) {\n                if (this.gametip.indexOf(res.msg[i].label[j].name) == -1) {\n                  this.gametip.push(res.msg[i].label[j].name);\n                }\n              }\n            }\n            this.getpage(res.msg);\n          }\n        }\n      });\n    },\n    //判断联动\n    connect() {\n      this.connectarr = [this.showtype, this.showtip, this.showpingtai];\n      var num = 0;\n      for (var i = 0; i < 3; i++) {\n        if (this.connectarr[i]) {\n          num++;\n        }\n      }\n      if (num >= 2) {\n        this.connectflag = true;\n      }\n    },\n    //获取联动数据\n    connectResult() {\n      // console.log(this.connectarr)\n      // console.log(\"/////////////////////////////\");\n      var newarr = [];\n      var that=this;\n      gameIndex().then(res => {\n        if (res.state === \"1\") {\n          if (this.connectarr[0]) {\n            //type\n            if (newarr.length > 0) {\n              newarr = newarr.filter(function(item) {\n                if (item.class.name == that.connectarr[0]) {\n                  return item;\n                }\n              });\n            } else {\n              newarr = res.msg.filter(function(item) {\n                if (item.class.name == that.connectarr[0]) {\n                  return item;\n                }\n              });\n            }\n          }\n          // console.log(newarr);\n          if (this.connectarr[1]) {\n            //tip\n            if (newarr.length > 0) {\n\n              newarr = newarr.filter(function(item) {\n                var len = item.label.length;\n                if (len > 0) {\n                  for (var j = 0; j < len; j++) {\n                    if (item.label[j].name == that.connectarr[1]) {\n                      return item;\n                    }\n                  }\n                }\n              });\n            } else {\n              newarr = res.msg.filter(function(item) {\n                var len = item.label.length;\n                if (len > 0) {\n                  for (var j = 0; j < len; j++) {\n                    if (item.label[j].name == that.connectarr[1]) {\n                      return item;\n                    }\n                  }\n                }\n              });\n            }\n          }\n          // console.log(newarr);\n\n          if (this.connectarr[2]) {\n\n            if (newarr.length > 0) {\n              newarr = newarr.filter(function(item) {\n                // console.log(i)\n                if (that.connectarr[2]== \"小程序\") {\n                  if (item.wechat == \"1\") {\n                    return item;\n                  }\n                } else if (that.connectarr[2] == \"安卓\") {\n                  if (item.android == \"1\") {\n                    return item;\n                  }\n                } else if (that.connectarr[2] == \"ios\") {\n                  if (item.ios == \"1\") {\n                    return item;\n                  }\n                }\n              });\n            } else {\n              newarr = res.msg.filter(function(item) {\n                // console.log(i)\n                if (that.connectarr[2] == \"小程序\") {\n                  if (item.wechat == \"1\") {\n                    return item;\n                  }\n                } else if (that.connectarr[2] == \"安卓\") {\n                  if (item.android == \"1\") {\n                    return item;\n                  }\n                } else if (that.connectarr[2] == \"ios\") {\n                  if (item.ios == \"1\") {\n                    return item;\n                  }\n                }\n              });\n            }\n          }\n          // console.log(newarr);\n\n          this.getpage(newarr);\n        }\n      });\n    },\n    //全部游戏列表\n    allgame() {\n      this.searchvalue=''\n      this.pageindex = 1;\n      gameIndex().then(res => {\n        this.showtype = \"\";\n        this.showtip = \"\";\n        this.showpingtai = \"\";\n        this.connect();\n        this.connectflag = false;\n        if (res.state === \"1\") {\n          this.getpage(res.msg);\n          this.spinShow = false;\n        }\n      });\n    },\n    //选择平台\n    selectpigntai(i) {\n      this.pageindex = 1;\n      this.showpingtai = i;\n      this.connect();\n      // this.showtype = [];\n      // this.showtip = [];\n      if (this.connectflag) {\n        this.connectResult();\n      } else {\n        gameIndex().then(res => {\n          if (res.state === \"1\") {\n            var newarr = res.msg.filter(function(item) {\n              // console.log(i)\n              if (i == \"小程序\") {\n                if (item.wechat == \"1\") {\n                  return item;\n                }\n              } else if (i == \"安卓\") {\n                if (item.android == \"1\") {\n                  return item;\n                }\n              } else if (i == \"ios\") {\n                if (item.ios == \"1\") {\n                  return item;\n                }\n              }\n            });\n            this.getpage(newarr);\n          }\n        });\n      }\n    },\n    //选择分类\n    selecttype(i) {\n      this.pageindex = 1;\n      // this.showtip = [];\n      this.showtype = i;\n      this.connect();\n      // this.showpingtai=[]\n      if (this.connectflag) {\n        this.connectResult();\n      } else {\n        gameIndex().then(res => {\n          if (res.state === \"1\") {\n            var newarr = res.msg.filter(function(item) {\n              if (item.class.name == i) {\n                return item;\n              }\n            });\n            this.getpage(newarr);\n          }\n        });\n      }\n    },\n    //选择标签\n    selecttip(i) {\n      this.pageindex = 1;\n      // this.showtype = [];\n      this.showtip = i;\n      this.connect();\n      // this.showpingtai=[]\n      if (this.connectflag) {\n        this.connectResult();\n      } else {\n        gameIndex().then(res => {\n          if (res.state === \"1\") {\n            var newarr = res.msg.filter(function(item) {\n              var len = item.label.length;\n              if (len > 0) {\n                for (var j = 0; j < len; j++) {\n                  if (item.label[j].name == i) {\n                    return item;\n                  }\n                }\n              }\n            });\n            this.getpage(newarr);\n            // this.savegamearr = newarr;\n          }\n        });\n      }\n    },\n\n    //搜索\n    search(val) {\n      this.pageindex = 1;\n      if (val) {\n        gameIndex().then(res => {\n          if (res.state === \"1\") {\n            var newarr = res.msg.filter(function(item) {\n              if (\n                item.name.indexOf(val) == 0 &&\n                item.name.length == val.length\n              ) {\n                return item;\n              }\n            });\n            if (newarr.length > 0) {\n                this.showtype = \"\";\n                this.showtip = \"\";\n                this.showpingtai = \"\";\n                this.connect();\n                this.connectflag = false;\n              this.getpage(newarr);\n            } else {\n              this.$Message.warning(\"没有找到匹配结果\");\n            }\n          }\n        });\n      } else {\n        this.$Message.warning(\"请输入搜索内容\");\n      }\n    },\n    changepage(index) {\n      var _start = (index - 1) * this.pagesize;\n      var _end = index * this.pagesize;\n      this.datalist = this.totaldatalist.slice(_start, _end);\n      var scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      this.$refs.marilyn_tab.scrollTop;\n    },\n    uploadSuccess(res, file) {},\n    handleUpload(file) {\n      var self = this;\n      // console.log(file);\n      var reader = new FileReader(),\n        img = new Image();\n      reader.readAsDataURL(file);\n      reader.onload = function() {\n        // console.log(this.result);\n        self.marilynNewImg = this.result;\n      };\n      this.file = file;\n    },\n    zipUpload(file) {\n      this.zipfileUrl = \"\";\n      var btn = document.querySelector(\"#btn\");\n      var btn_edit = document.querySelector(\"#btn_edit\");\n      // console.log(btn)\n      // console.log(btn_edit)\n\n      btn.disabled = true;\n      btn_edit.disabled = true;\n      var a = 0;\n      var jindu = setInterval(() => {\n        a++;\n        this.uploadtitle = \"已上传\" + a + \"%\";\n        if (this.zipfileUrl) {\n          this.uploadtitle = \"上传完成\";\n          btn.disabled = false;\n          btn_edit.disabled = false;\n\n          clearTimeout(jindu);\n        }\n        if (a == 99) {\n          clearTimeout(jindu);\n          var newtime = setInterval(() => {\n            this.uploadtitle = \"已上传99%\";\n            if (this.zipfileUrl) {\n              this.uploadtitle = \"上传完成\";\n              btn.disabled = false;\n              btn_edit.disabled = false;\n              clearTimeout(newtime);\n            }\n          }, 100);\n        }\n      }, 700);\n\n      if (file.type.indexOf(\"zip\") > -1) {\n        this.uploaded = true;\n        this.zipfile = file;\n        let data = new FormData();\n        const option = {\n          method: \"post\",\n          body: data\n        };\n        data.append(\"file\", this.zipfile);\n        fetch(zipuploadUrl, option)\n          .then(res => res.json())\n          .then(resJson => {\n            if (resJson.state === \"1\") {\n              this.zipfileUrl = resJson.msg;\n              //  console.log('上传 '+ this.zipfileUrl)\n            }\n          });\n      }\n    },\n    modifyUpload(e) {\n      var self = this;\n      this.currentImg = e.currentTarget.files[0];\n      var reader = new FileReader(),\n        img = new Image();\n      reader.readAsDataURL(this.currentImg);\n      reader.onload = function(e) {\n        // self.marilynAddImg = e.target.result\n        document.querySelector(\".curtimg\").src = e.target.result;\n      };\n    },\n    addGame() {\n      let data = new FormData();\n\n      // console.log(this.pingtaivalue);\n      //   {id:\"2\",name: \"android\" },\n      //   {id:\"1\",name: \"ios\" },\n      //   {id:\"0\",name: \"小程序\" }\n      if (this.pingtaivalue.length > 0) {\n        //android\n        if (this.pingtaivalue.indexOf(\"2\") > -1) {\n          data.append(\"android\", \"1\");\n        } else {\n          data.append(\"android\", \"0\");\n        }\n        //ios\n        if (this.pingtaivalue.indexOf(\"1\") > -1) {\n          data.append(\"ios\", \"1\");\n        } else {\n          data.append(\"ios\", \"0\");\n        }\n        //小程序\n        if (this.pingtaivalue.indexOf(\"0\") > -1) {\n          data.append(\"wechat\", \"1\");\n        } else {\n          data.append(\"wechat\", \"0\");\n        }\n      }\n      if (this.marilynType == \"0\") {\n        this.marilynUrl = this.zipfileUrl;\n      }\n      data.append(\"file\", this.file);\n      data.append(\"name\", this.marilynName);\n      data.append(\"alias\", this.marilynAlias);\n      data.append(\"url\", this.marilynUrl);\n      data.append(\"cId\", this.marilynSelect);\n      if (this.marilynTag) {\n        data.append(\"label\", this.marilynTag.join(\",\"));\n      }\n      data.append(\"type\", this.marilynType);\n      data.append(\"screen\", this.marilyndir);\n      data.append(\"recommend\", this.marilyncom);\n      data.append(\"weight\", this.marilynnum);\n      const option = {\n        method: \"post\",\n        body: data\n      };\n      fetch(gameuploadUri, option)\n        .then(res => res.json())\n        .then(resJson => {\n          if (resJson.state === \"1\") {\n            this.$Message.success(resJson.msg);\n            this.file = \"\";\n            this.marilynName = \"\";\n            this.marilynAlias = \"\";\n            this.marilynUrl = \"\";\n            this.marilynSelect = \"\";\n            this.marilynTag = \"\";\n            this.marilynNewImg = \"\";\n            this.getData();\n            this.addCard = false;\n          } else {\n            this.$Message.error(resJson.msg);\n          }\n        });\n    },\n    toolDelete() {\n      gameDelete({\n        id: this.currentDelete\n      }).then(res => {\n        if (res.state === \"1\") {\n          this.deleteModel = false;\n          this.$Message.success(res.msg);\n          this.getData();\n        } else {\n          this.$Message.error(res.msg);\n        }\n      });\n    },\n    toolEdit() {\n      let data = new FormData();\n      //   {id:\"2\",name: \"android\" },\n      //   {id:\"1\",name: \"ios\" },\n      //   {id:\"0\",name: \"小程序\" }\n      if (this.editPTvalue.indexOf(\"android\") > -1) {\n        data.append(\"android\", \"1\");\n      } else {\n        data.append(\"android\", \"0\");\n      }\n      if (this.editPTvalue.indexOf(\"ios\") > -1) {\n        data.append(\"ios\", \"1\");\n      } else {\n        data.append(\"ios\", \"0\");\n      }\n      if (this.editPTvalue.indexOf(\"wechat\") > -1) {\n        data.append(\"wechat\", \"1\");\n      } else {\n        data.append(\"wechat\", \"0\");\n      }\n      if (this.currentImg) {\n        data.append(\"file\", this.currentImg);\n      }\n      data.append(\"id\", this.currentEdit.id);\n      data.append(\"name\", this.currentEdit.name);\n      data.append(\"alias\", this.currentEdit.alias);\n      data.append(\"cId\", this.classId);\n      data.append(\"label\", this.labelId.join(\",\"));\n      data.append(\"type\", this.typeId);\n      data.append(\"url\", this.currentEdit.url);\n      data.append(\"recommend\", this.currentEdit.recommend);\n      data.append(\"screen\", this.currentEdit.screen);\n      data.append(\"weight\", this.currentEdit.weight);\n      const option = {\n        method: \"post\",\n        body: data\n      };\n      fetch(gameUpdate, option)\n        .then(res => res.json())\n        .then(resJson => {\n          if (resJson.state === \"1\") {\n            this.editModel = false;\n            this.$Message.success(resJson.msg);\n            this.getData();\n          } else {\n            this.$Message.error(resJson.msg);\n          }\n        });\n    }\n  },\n  watch: {\n    marilynType(value) {\n      if (value != 0) {\n        document.querySelector(\".btn\").disabled = false;\n      } else {\n        if (this.uploadtitle != \"上传完成\") {\n          document.querySelector(\".btn\").disabled = true;\n        }\n      }\n    },\n    addCard(value) {\n      this.btnAdd = true;\n    },\n    editModel(value) {\n      this.btnEdit = true;\n      if (!value) {\n        this.editPTvalue = [];\n        this.editpingtaivalue = [];\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.container {\n  padding-top: 20px;\n}\n\n.marilyn_tab {\n  padding-bottom: 5.333333rem; /* 200/37.5 */\n  margin-top: 20px;\n}\n\n.marilyn_card_add {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.addgame {\n  width: 100%;\n}\n\n.add_game_view {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.marilyn_tools {\n  margin-top: 20px;\n}\n\n.upload_image {\n  position: absolute;\n  top: 0;\n  height: 100%;\n}\n\n.inputfile {\n  height: 164px;\n  width: 164px;\n  position: absolute;\n  top: 0;\n  opacity: 0;\n}\n\n.curtimg {\n  height: 164px;\n  width: 164px;\n}\n\n.page {\n  text-align: center;\n  width: calc(100% - 16rem /* 600/37.5 */);\n  padding: 0.8rem /* 30/37.5 */ /* 20/37.5 */ 0;\n  background: rgb(240, 242, 245);\n  position: fixed;\n  bottom: 0;\n}\n\n.xialai span {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.sousuo {\n  position: absolute;\n  top: 20px;\n  width: 200px;\n  left: 480px;\n}\n</style>\n\n"]}]}